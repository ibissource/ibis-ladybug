<div class="row" id="details-row">
    <button type="button" class="btn btn-outline-primary col" ng-click="$ctrl.rerun()">Rerun</button>
    <button type="button" class="btn btn-outline-primary col" ng-click="$ctrl.toggleEdit()" id="details-edit">
        Edit
    </button>
    <button type="button" class="btn btn-outline-primary col" ng-click="$ctrl.saveEditField(true)" id="save" ng-show="$ctrl.editing">
        Save
    </button>
    <div class="input-group col">
        <div class="input-group-btn">
            <button type="button" class="btn btn-outline-primary dropdown-toggle" data-toggle="dropdown"
                    aria-haspopup="true" aria-expanded="false">Download <span class="caret"></span>
            </button>
            <ul class="dropdown-menu">
                <li><a href="#" ng-click="$ctrl.downloadReports(true, true)">Report & Message</a></li>
                <li><a href="#" ng-click="$ctrl.downloadReports(false, true)">Report</a></li>
                <li><a href="#" ng-click="$ctrl.downloadReports(true, false)">Message</a></li>
            </ul>
        </div>
    </div>
    <div class="input-group col">
        <div class="input-group-btn">
            <button type="button" class="btn btn-outline-primary dropdown-toggle" data-toggle="dropdown"
                    aria-haspopup="true" aria-expanded="false">Copy <span class="caret"></span>
            </button>
            <ul class="dropdown-menu">
                <li ng-repeat="(key, value) in $ctrl.availableStorages">
                    <a href="#" ng-click="$ctrl.copyReport(key)">
                        {{value}}
                    </a>
                </li>
            </ul>
        </div>
    </div>
    <button type="button" class="btn btn-outline-primary col" ng-click="$ctrl.onSelectRelay.expand()">Expand</button>
    <button type="button" class="btn btn-outline-primary col" ng-click="$ctrl.onSelectRelay.collapse()">Collapse</button>
    <button type="button" class="btn btn-outline-primary col" ng-click="$ctrl.onSelectRelay.close()">Close</button>
</div>
<div class="form-row">
                <span class="col-md-2">
                    Stub Strategy:
                </span>
    <div class="form-group col-md-4">
        <select class="form-control" ng-options="strategy for strategy in $ctrl.stubStrategies" ng-model="$ctrl.stubStrategySelect">
        </select>
    </div>
</div>
<div id="{{'notifications' + $ctrl.id}}">
    <div class="notification" ng-repeat="(key, notification) in $ctrl.reportDetails.notifications"
         ng-class="{notification: notification.level === 'ok', error_notification: notification.level === 'error'}">
        {{notification.text}}
        <i class="fa fa-times" style="float: right" ng-click="$ctrl.close_notification(key)"></i>
    </div>
</div>
<pre id="code-wrapper">
    <code id="code" class="xml">
        {{$ctrl.reportDetails.text}}
    </code>
</pre>
<table>
    <tbody>
    <tr ng-repeat="(key, value) in $ctrl.reportDetails.values">
        <td>{{key}}</td>
        <td>{{value}}</td>
    </tr>
    </tbody>
</table>

<div class="modal" tabindex="-1" role="dialog" id="{{'modal' + $ctrl.id}}">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Discarding changes...</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p>Would you like to discard changes?</p>
                <pre>
                    <span ng-repeat="word in $ctrl.diff" ng-class="{diff_added: word[0] == 1, diff_deleted: word[0] == -1}">{{word[1]}}</span>
                </pre>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" ng-click="$ctrl.saveEditField(false)">Discard Changes</button>
                <button type="button" class="btn btn-primary" ng-click="$ctrl.saveEditField(true)">Save changes</button>
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
            </div>
        </div>
    </div>
</div>